<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Robert Munro</title>
  <link rel="stylesheet" href="styles.css">

  <!-- One viewport meta tag – keep it inside <head> -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>


<body>
<nav class="glass-nav">
 <a href="#" data-target="section1" aria-current="page"><span>Home</span></a>
    <a href="#" data-target="section2">Photos</a>
    <a href="#" data-target="section3">Coin Flip</a>

    <!-- Sliding panel (one element for all links) -->
    <div class="panel"></div>
</nav>

<h1></h1>

<main>
  <!-- Section 1 – Home -->
  <section id="section1">
    <h2></h2>
    <div class="blog-container">

      <div class="preview-list">

      <!--
         <!-- Contact card (static)
        <article class="post static"><h3>Contact</h3>
          <div class="contact-card">
            <p><strong>Email:</strong> </p>
            <p><strong>Phone:</strong> (123) 456‑7890</p>
            <p><strong>Address:</strong></p>
          </div>
        </article>  -->

        <!-- Featured image -->
        <article class="post"><h3>Featured Image</h3>
          <div class="preview">Click to view the featured picture.</div>
          <div class="full-body">
            <img src="assets/pic.png" alt="A descriptive caption of pic.png">
            <p>A descriptive caption for pic.png.</p>
            <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.</p>

<p>Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.</p>

<p>Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,</p>

          </div>
        </article>
       <article class="post"><h3>Witch Game</h3>
          <div class="preview">
  <br></div>
          <div class="full-body">
     <iframe
        src="assets/kiki.html"
          width="100%";
          height=400em;
          style="border:none;"
          title="I'm a Witch – Pico‑8 game"></iframe>
    </iframe>
Keyboard controls: <kbd>Z</kbd>, <kbd>X</kbd>,
  <span class="arrow" style="font-size:.9rem;">&#8593;</span>
  <span class="arrow" style="font-size:.9rem;">&#8595;</span>
  <span class="arrow" style="font-size:.9rem;">&#8592;</span>
  <span class="arrow" style="font-size:.9rem;">&#8594;</span>

          </div>
        </article>

<article class="post">
  <h3>Birds Demo</h3>

  <!-- No controls for this one -->
<div class="preview">
  <br></div>
  <div class="full-body">
    <iframe
      src="assets/hummingbirds.html"
      width="100%"
      height="400em"
      style="border:none;"
      title="Hummingbirds – Demo">
    </iframe>
  </div>
</article>

        <!-- Recent project showcase -->
        <article class="post"><h3>Recent Project Showcase</h3>
          <p class="meta">20 Sep 2025</p>
          <div class="preview">A sneak peek of the latest work</div>
          <div class="full-body">
            <p>This project involved building a cutting‑edge web application that integrates real‑time data visualisation and AI‑powered analytics.</p>
            <div class="image-row">
              <img src="assets/pic.png" alt="Screenshot of the first feature in the recent project.">
              <img src="assets/pic.png" alt="Screenshot of the second feature in the recent project.">
            </div>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>

<p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.</p>

<p>Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.</p>

<p>Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,</p>
          </div>
        </article>

        <!-- CV -->
        <article class="post"><h3 data-no-title="true">Curriculum Vitae</h3>
          <div class="preview">Click to view or download here.</div>
          <div class="full-body">
            <div class="cv-header-wrapper">
              <a href="assets/cv.pdf" target="_blank" class="download-btn">Download CV</a>
            </div>
            <div class="cv-container">
              <iframe src="assets/cv.pdf"></iframe>
            </div>
          </div>
        </article>
      </div>

      <!-- Detail area – shows the currently selected post -->
      <div class="post-detail"></div>
    </div>

  </section>
  <section id="section2">
    <h2></h2>

    <div class="gallery" id="gallery">

      <!-- Example image 1 -->
      <figure class="gallery-item">
        <img src="assets/gallery5.png" alt="Gallery image 1">
        <figcaption class="description">A brief description of Gallery image 1.</figcaption>
      </figure>

      <!-- Repeat for the remaining images… -->
      <figure class="gallery-item"><img src="assets/gallery6.png" alt="Gallery image 2"><figcaption class="description">A brief description of Gallery image 2.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery3.png" alt="Gallery image 3"><figcaption class="description">A brief description of Gallery image 3.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery4.png" alt="Gallery image 4"><figcaption class="description">A brief description of Gallery image 4.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery1.png" alt="Gallery image 5"><figcaption class="description">A brief description of Gallery image 5.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery2.png" alt="Gallery image 6"><figcaption class="description">A brief description of Gallery image 6.</figcaption></figure>
    </div>
  </section>


   </section>
  <section id="section3">
<div id="coin-demo">
  <div class="coins-wrapper" id="wrapper"></div>

  <div id="controls">
    <label>&nbsp;</label>
    <div id="numCoinsContainer">
      <button class="coin-btn selected" data-num="1">1</button>
      <button class="coin-btn" data-num="2">2</button>
      <button class="coin-btn" data-num="3">3</button>
      <button class="coin-btn" data-num="4">4</button>
    </div>
    <button id="flipBtn">Flip!</button>
  </div>


</div> <!-- /#coin-demo -->
     </section>

</main>

<!-- Modal for gallery preview -->
<div id="imageModal" class="modal">
  <img src="" alt="">
  <div class="modal-caption"></div>
</div>
<script>
/* ------------------------------------------------------------------ */
/* 1️⃣ Navigation & section activation --------------------------------*/

document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('[data-target]');
    const sections = document.querySelectorAll('section');
    const nav      = document.querySelector('.glass-nav');
    const panel    = nav.querySelector('.panel');

    let currentNavIndex = null;        // index of the link that is currently active
    let currentSectionId = null;       // id of the section that is currently shown

    /* ---------------------------------------------------------------- */

    function clearActive(sectionId) {
        document
            .querySelectorAll(`#${sectionId} .post.active`)
            .forEach(p => p.classList.remove('active'));
    }

    function movePanelTo(idx) {
        const linkRect = navLinks[idx].getBoundingClientRect();
        const navRect  = nav.getBoundingClientRect();

        const targetLeft =
            linkRect.left + (linkRect.width / 2)
                - navRect.left
                - (panel.clientWidth / 2);

        panel.style.transform = `translateX(${targetLeft}px)`;
    }


    // Smooth scroll – used only inside the Home section
    function scrollToWithOffset(el, offset = 0) {
        el.scrollIntoView({ behavior: 'auto', block: 'start' });
        setTimeout(() => window.scrollBy(0, offset), 0);
    }

    // Instant (no‑smooth) jump – used when moving between sections
    function scrollToInstantWithOffset(el, offset = 0) {
          el.scrollIntoView({ behavior: 'auto', block: 'start' });

    // Offset it after the layout has settled
    requestAnimationFrame(() => window.scrollBy(0, offset = -1000));
    }

    /* ---------------------------------------------------------------- */

    const THRESHOLD_TOP = nav.offsetHeight / 1; // tweak if you need more room

    function showSection(id, linkIdx = null) {
        // --------- hide the previous section --------------------------------
        sections.forEach(s => s.classList.remove('active'));

        const targetSec = document.getElementById(id);
        if (!targetSec) return;

        targetSec.classList.add('active');

        // remember which section is now active (used to decide on scrolling)
        currentSectionId = id;
        clearActive(id);
        expandFirstInSection(id);

        /* ------------------------------------------------- */
        /* 1️⃣ Only scroll when we’re *not* at the very top of the page   */
        /* ------------------------------------------------- */
        const isAtTop = window.scrollY < THRESHOLD_TOP;

        if (linkIdx !== null) {
            // **no smooth** – instant jump between sections
            // If you want a small offset to keep the section just below the nav,
            // pass `-nav.offsetHeight` as the second argument.
            scrollToInstantWithOffset(targetSec);
        }

        /* ------------------------------------------------- */
        /* 2️⃣ Update panel & active link (always run – we still want it) */
        /* ------------------------------------------------- */
        if (linkIdx !== null) {
            movePanelTo(linkIdx);
            currentNavIndex = linkIdx;
            navLinks.forEach((l, i) =>
                l.classList.toggle('active-link', i === currentNavIndex)
            );
        }
    }

    function expandFirstInSection(sectionId){
        const list = document.querySelector(`#${sectionId} .preview-list`);
        if (!list) return;
        list.querySelectorAll('.post.active').forEach(p=>p.classList.remove('active'));
        const firstPost = list.querySelector('.post:not(.static)');
        if(!firstPost) return;
        firstPost.classList.add('active');
        const detailArea = document.querySelector(`#${sectionId} .post-detail`);
        const title   = firstPost.querySelector('h3').outerHTML;
        const meta    = firstPost.querySelector('.meta')?.outerHTML || '';
        const body    = firstPost.querySelector('.full-body')?.innerHTML || '';
        detailArea.innerHTML = `<article>${title}${meta}<div class="full-body">${body}</div></article>`;
    }

    /* ----------------------------------------------------------------- */
    const initialIdx = 0; // index of navLinks[0]
    showSection(navLinks[initialIdx].dataset.target, initialIdx);

    navLinks.forEach((link, i) => {
        link.addEventListener('click', e => {
            e.preventDefault();
            showSection(link.dataset.target, i);
        });
    });

    /* ----------------------------------------------------------------- */
    /* 3️⃣ Preview‑list clicks – same “no‑scroll‑when‑at‑top” guard     */
    /* ----------------------------------------------------------------- */
    document.querySelectorAll('.preview-list').forEach(list => {
        list.addEventListener('click', e => {
            const post = e.target.closest('.post');
            if (!post || post.classList.contains('static')) return;

            list.querySelectorAll('.post.active')
                .forEach(p => p.classList.remove('active'));
            post.classList.add('active');

            const detailArea = list.nextElementSibling; // .post-detail
            const title   = post.querySelector('h3').outerHTML;
            const meta    = post.querySelector('.meta')?.outerHTML || '';
            const body    = post.querySelector('.full-body')?.innerHTML || '';
            detailArea.innerHTML =
                `<article>${title}${meta}<div class="full-body">${body}</div></article>`;

            /* Only scroll if we’re not already at the top of the page */
            const isAtTop = window.scrollY < THRESHOLD_TOP;
            if (!isAtTop) {
                // Smooth scroll *inside* the Home section
                scrollToWithOffset(detailArea, -600);
            }
        });
    });
});
/* --------------------------------------------------------------
   GLASS NAV PANEL – distance → duration (px per second)
-------------------------------------------------------------- */
document.addEventListener('DOMContentLoaded', () => {
    const nav   = document.querySelector('.glass-nav');
    const panel = nav.querySelector('.panel');
    const links = Array.from(nav.querySelectorAll('a'));
    const count = links.length;



    /* ----------------------------------------------------------
       State variables
    ---------------------------------------------------------- */
    let currentLeft = 0;          // left offset of the panel (px)
    let activeIdx   = -1;         // index of the link that is currently “active”

    /* ----------------------------------------------------------
       Helper: distance → duration (px per second)
    ---------------------------------------------------------- */
    const msPerPixel = 1000 / 550;   // ms for each pixel
    const minDur     = .85;          // seconds
    const maxDur     = 1.25;         // seconds

    const durationForDistance = dist => {
        const raw = Math.abs(dist) * msPerPixel / 1000;
        return Math.min(Math.max(raw, minDur), maxDur);
    };
    /* ----------------------------------------------------------
       Move the selector to the link at position `idx`
    ---------------------------------------------------------- */
    const setPanel = idx => {
        if (idx < 0 || idx >= count) return;

        const linkRect = links[idx].getBoundingClientRect();
        const navRect  = nav.getBoundingClientRect();
        const panelW   = panel.clientWidth;

        // Desired left offset so the panel is centered on the link text
        const targetLeft =
            linkRect.left + (linkRect.width / 2) - navRect.left - (panelW / 2);

        // Animate over a duration that depends on how far we must travel
        const dur = durationForDistance(targetLeft - currentLeft);
        panel.style.transitionDuration = `${dur}s`;

        panel.style.transform = `translateX(${targetLeft}px)`;
        currentLeft = targetLeft;
    };


       activeIdx = links.findIndex(a => a.hasAttribute('aria-current'));
    if (activeIdx !== -1) {
        // Defer until layout is ready
        requestAnimationFrame(() => setPanel(activeIdx));
    } else {
        panel.style.opacity = '0';
    }


function initNav() {
    // … all the constants / state variables …

    /* ---------- INITIAL POSITION ---------- */
    activeIdx = links.findIndex(a => a.hasAttribute('aria-current'));
    if (activeIdx !== -1) {
        // Let Safari finish layout first
        requestAnimationFrame(() => setPanel(activeIdx));
    } else {
        panel.style.opacity = '0';
    }
}

document.addEventListener('DOMContentLoaded', initNav);

    /* ----------------------------------------------------------
       Hover logic – update the selector and remember the index
    ---------------------------------------------------------- */
    links.forEach((link, i) => {
        link.addEventListener('mouseenter', () => {
            activeIdx = i;
            setPanel(i);
            panel.style.opacity = '1';
        });
    });

    /* ----------------------------------------------------------
       Return to the active section when leaving the nav bar
    ---------------------------------------------------------- */
    nav.addEventListener('mouseleave', () => {
        const activeLink = nav.querySelector('a.active-link');
        if (!activeLink) return;

        const idx = links.indexOf(activeLink);
        if (idx === -1) return;

        activeIdx = idx;
        setPanel(idx);
        panel.style.opacity = '1';
    });

    /* ----------------------------------------------------------
       Flick / swipe detection
    ---------------------------------------------------------- */
    let startX   = null;          // X coordinate where the gesture started
    let startT   = null;          // Timestamp when the gesture started

    const minDistance = 30;       // px – minimal distance for a flick
    const minSpeed    = 0.3;      // px/ms (≈300 px/s)

    const handlePointerDown = e => {
        if (e.pointerType === 'mouse' && e.button !== 0) return; // ignore right‑clicks
        startX = e.clientX;
        startT = performance.now();
    };

    const handlePointerUp = e => {
        if (startX === null) return;

        const endX   = e.clientX;
        const deltaX = endX - startX;
        const deltaT = performance.now() - startT;

        // Only consider horizontal flicks that are fast enough
        if (
            Math.abs(deltaX) > minDistance &&
            Math.abs(deltaX) / deltaT >= minSpeed
        ) {
            const dir   = deltaX > 0 ? +1 : -1;     // right or left
            let newIdx  = activeIdx + dir;

            // Clamp to the bounds of the link list
            if (newIdx < 0)    newIdx = 0;
            if (newIdx >= count) newIdx = count - 1;

            if (newIdx !== activeIdx) {
                activeIdx = newIdx;
                setPanel(newIdx);
                panel.style.opacity = '1';
            }
        }

        // Reset
        startX = null;
        startT = null;
    };

    nav.addEventListener('pointerdown', handlePointerDown, {passive: true});
    nav.addEventListener('pointerup',   handlePointerUp);

    /* ----------------------------------------------------------
       Touch‑only fallback – blocks vertical scroll during horizontal swipe
    ---------------------------------------------------------- */
    if ('ontouchstart' in window) {
        let startY = null;           // Y coordinate at touchstart (for direction test)
        let isHorizontalTouch = null; // unknown until we see the first move

        nav.addEventListener('touchstart', e => {
            if (e.touches.length !== 1) return;

            const t = e.touches[0];
            startX   = t.clientX;
            startY   = t.clientY;
            startT   = performance.now();
            isHorizontalTouch = null; // reset
        }, {passive: false});          // must be non‑passive to call preventDefault()

        nav.addEventListener('touchmove', e => {
            if (!e.touches || e.touches.length !== 1) return;

            const t   = e.touches[0];
            const dx  = t.clientX - startX;
            const dy  = t.clientY - startY;

            // Decide direction only once
            if (isHorizontalTouch === null) {
                isHorizontalTouch = Math.abs(dx) > Math.abs(dy);
            }

            // If a horizontal swipe is detected, block vertical scrolling
            if (isHorizontalTouch) {
                e.preventDefault();
            }
        }, {passive: false});

        nav.addEventListener('touchend', e => {
            if (!e.changedTouches || e.changedTouches.length !== 1) return;

            const t   = e.changedTouches[0];
            const endX = t.clientX;
            const deltaX = endX - startX;
            const deltaT = performance.now() - startT;

            // Re‑use the same flick logic as for pointer events
            if (
                Math.abs(deltaX) > minDistance &&
                Math.abs(deltaX) / deltaT >= minSpeed
            ) {
                const dir   = deltaX > 0 ? +1 : -1;
                let newIdx  = activeIdx + dir;

                if (newIdx < 0)    newIdx = 0;
                if (newIdx >= count) newIdx = count - 1;

                if (newIdx !== activeIdx) {
                    activeIdx = newIdx;
                    setPanel(newIdx);
                    panel.style.opacity = '1';
                }
            }

            // Reset
            startX   = null;
            startY   = null;
            isHorizontalTouch = null;
        });
    }
});


// Gallery modal --------------------------------------------
const modal = document.getElementById('imageModal');
const modalImg = modal.querySelector('img');
const modalCaption = modal.querySelector('.modal-caption');

document.getElementById('gallery').addEventListener('click', e => {
  if (e.target.tagName.toLowerCase() !== 'img') return;

  const img = e.target;
  modalImg.src   = img.src;
  modalImg.alt   = img.alt;

  // Grab the caption text from the closest .gallery-item
  const captionEl = img.closest('.gallery-item').querySelector('.description');
  const captionText = captionEl ? captionEl.innerText : '';
  if (captionText) {
    modalCaption.textContent = captionText;
    modalCaption.style.display = 'block';
  } else {
    modalCaption.style.display = 'none';
  }

  /* ---- open the modal & trigger the animation ---- */
  modal.classList.add('show');

  // Force a re‑flow so that if you click the same image again,
  // the animation will restart.
  void modal.offsetWidth;            // <-- this line is optional but safe
});

modal.addEventListener('click', () => {
  modal.classList.remove('show');
  modalImg.src = '';
  modalImg.alt = '';
  modalCaption.textContent = '';
  modalCaption.style.display = 'none';
});


</script>

<!--  External coin‑flip script -->
<script src="coin-flip.js" defer></script>


</body>
</html>
