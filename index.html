<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Robert Munro</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* Theme & spacing ----------------------------------------------------- */
:root{
  --section-padding-vertical:2px; /*height of nav borders*/
  --section-padding-horizontal:0;
  --blog-margin-left: 1vw;
  --blog-margin-right: 4vw;
  --post-background:white;
  --section-background:white;
  --contact-background:#E2E7ED;
}

/* Custom properties for glass nav (from nav.html) --------------------- */
:root{
    /* Navigation bar */
    --nav-height: 16vh;
    --sliding-panel-border-radius: var(--nav-height);
    --background-color:#1C4364;
    --navtext-color: #B4AC58; /*180, 172, 88*/
    --nav-bg-opacity: .175;
    --hover-bg-opacity: .1;
    --blur-strength: 6px;
    --hover-blur-strength: 0px;
    --hover-hue-change: -75deg;
    --nav-tint: 28, 67, 100;
    --hover-tint: 0, 0, 0;
    --slider-outline: 0, 0, 0;
    --active-post-tint: 180, 172, 88;
    --active-blog-hue-change:-70deg;

    /* Background Base colours */
    --bg-base: #001f3f;             /* deep navy 0, 31, 63*/
    --yellow: #FFC42E;           /* dark gold/yellow 255, 196, 46*/
}
/* Sections ------------------------------------------------------------- */
main section{
 min-height: calc(100vh - var(--nav-height));
  width:100%;background:var(--section-background);
  padding:0 var(--section-padding-horizontal);
  border-top: 1px 0 0 solid rgba(28, 67, 100,1);
  display:none;
}
*, *::before, *::after {
  box-sizing: border-box;}


main section.active{display:block;opacity:1;}
/* Normalisation -------------------------------------------------------- */
body{
  font-family:'Arial',sans-serif;
background-color: var(--background-color);
background:var(--background-color);
width:100%;
}
body > *:not(.glass-nav){margin-top: calc(var(--nav-height) + var(--section-padding-vertical));}

/* 3️⃣ Navigation bar */
body{
    width:100%;margin:0; padding:0; font-family:'Arial', sans-serif;
}
.glass-nav {
    position: fixed;
    top:0; left:0; right:0;
    height: var(--nav-height);

    display:flex;
    align-items:center;
    justify-content: space-between;
    padding: 0 0vw;    /* outer border of words */
    background: rgba(var(--nav-tint),var(--nav-bg-opacity));
    border-radius: 1.8rem;

    border-bottom: 1px solid rgba(28, 67, 100,.2);
    border-top: 1px solid rgba(0,0,0,.1);
    z-index:1;
    overflow:hidden;            /* clip the sliding panel */
      pointer-events:auto;
}

/* ────────────────────────────────────────────────────── */
/* Links – relative so we can position the pane absolutely inside each one */
.glass-nav a{
    position:relative;
        width:100%;

    text-align:center;     /*  center link text inside its block */
    color:var(--navtext-color);
    text-decoration:none;
    font-weight:600;
    padding-left:0px;
    padding-right:0px;/*  margin for nav text */
    z-index:0;
    /* Responsive font‑size  */
    font-size: clamp(1rem, 4vw, 1.6rem);   /* min = 1rem, max = 2rem */
    text-shadow:
        0 1px 0 #000,
       -1px 0 0 #000,
        1px 0 0 #000,
        0 -1px 0 #000;

        z-index:-1;

}


.glass-nav a::before{
    content:"";
    position:absolute;
  /* independent X & Y offsets   */
  inset:-6vh -6vw;          /* top/bottom  left/right */
    background:transparent;
    pointer-events:auto;
    z-index:1;
}

/* ────────────────────────────────────── */
/* The sliding glass panel – enhanced 3D shading */
.glass-nav .panel{
    content:"";
    backdrop-filter: hue-rotate(var(--hover-hue-change));
    -webkit-backdrop-filter: hue-rotate(var(--hover-hue-change));
    position:absolute;
    top:3px; left:0; bottom:0px;

    width: calc(var(--nav-height) - 4px);
    min-width:25vw;
    height: calc(var(--nav-height) - 4px); /*calc(var(--nav-height)-2px);

    /* ------------------------------------------------- */
 pointer-events:none;
    border-radius:var(--sliding-panel-border-radius);
    border: 1.5px solid rgba(var(--slider-outline), .35);
    z-index:2;}
    @media (max-width:400px) {  .glass-nav .panel{ bottom:1.5px;height: calc(var(--nav-height)-1.5px);}}



/* Blog & preview ------------------------------------------------------- */
img{max-width:100%;height:auto;margin:20px auto;display:block;}
.blog-container{display:flex;}
.preview-list{
  width:calc(20vw + 3rem);flex-shrink:0;padding-right:0px;
  height:calc(100vh - 2px - var(--nav-height));
}
.post-detail{flex-grow:1;background:var(--post-background);
border-radius:8px;
margin-left:var(--blog-margin-left);margin-right:var(--blog-margin-right);font-size:1.05rem;
}

.preview-list .post .full-body{display:none;}
.meta{font-size:1rem;color:#555;margin-top:0rem;margin-bottom:1rem;}

/* ------------------------------------------------------------------
   1️⃣  Keep the old static‑post styling exactly as it is.
-------------------------------------------------------------------*/
.post.static{
    cursor: default;
    background: var(--contact-background);
    /* keep the special corner rounding for static posts */
    border-top-right-radius:8px;
    border-bottom-right-radius:8px;
    border-top-left-radius:0;
    border-bottom-left-radius:0;
    padding-top: .75rem;               /* space above the first line (title)   */
    padding-bottom: 1rem;
        padding-left: 2.5rem;

}

/* ------------------------------------------------------------------
   2️⃣  Glass‑panel look for all *non‑static* posts.
-------------------------------------------------------------------*/
.post:not(.static){
    /* --- Base glass appearance --------------------------------- */
    background: rgba(var(--nav-tint), var(--nav-bg-opacity));
    border-radius: 1.5rem;
    border-top: 1.5px solid rgba(0, 0, 0, 0);
        border-bottom: 1.5px solid rgba(0, 0, 0, 0);


    /* --- Layout – keep the post inside its container --------- */
    margin-top: .4vh;
    margin-left: .1vw;
    box-sizing: border-box;


    /* --- Interaction ----------------------------------------- */
    cursor: pointer;
    padding-left: 2rem;
    padding-bottom: 1rem;
    padding-right: 2rem;
    padding-top: 0rem;
}

/* ------------------------------------------------------------------
   3️⃣  Hover effect – same as .glass-blog-panel:hover
-------------------------------------------------------------------*/
.post:not(.static):hover{
   backdrop-filter:  hue-rotate(var(--active-blog-hue-change));
    -webkit-backdrop-filter:hue-rotate(var(--active-blog-hue-change));
    background: rgba(202, 197, 255, .75);

    /* remove the old transform/transition that came with .post:hover */
    transform:none;
    transition:none;
    background: transparent
    /* keep background transparent – glass already has opacity */
}
/* ------------------------------------------------------------------
   4️⃣ Active state – mirror the hover animation
-------------------------------------------------------------------*/
.post.active:not(.static),
/* optional alias – handy if your JS uses `.current` instead of `.active`  */
.post.current:not(.static) {
    /* glass‑panel depth + hue shift   */
   backdrop-filter:  hue-rotate(var(--active-blog-hue-change));
    -webkit-backdrop-filter:hue-rotate(var(--active-blog-hue-change));
 border-top: 1.5px solid rgba(0, 0, 0, .2);
        border-bottom: 1.5px solid rgba(0, 0, 0, .2);
    background: rgba(202, 197, 255, .75);

    transform: none;
    transition: none;
}

 @media (max-width:900px) {.post h3{margin:0 0 .25rem 0;}.meta{margin-top:.25rem;margin-bottom:.25rem;}
 .post.static p {
    margin-top:   0.5em;
    margin-bottom: 0em;
  }
.post.static p + p {
    margin-top: .25em;
    }
.post h3{font-size:1.1rem;} /* post preview font size  */
.post:not(.static){
    padding-left: 1rem;
    padding-right: 1rem;
    padding-bottom: 1rem;
    padding-top: 1rem;}
.post.static{        padding-left: .75rem;padding-right: .75rem;}
}

/* ------------------------CV styling ---------------------
WHITE SPACE above and below download button */
.cv-header-wrapper{
  display:flex;align-items:center;margin-bottom:0px;margin-top:1px;
}
.cv-header-wrapper a.download-btn{
  padding:.6rem 1.2rem;background:#2c3e50;color:#fff;text-decoration:none;border-radius:4px;font-size:1.1rem;
  border:1x solid #d4af37;
}
.cv-header-wrapper a.download-btn:hover{background:#d4af35;color:#222;}
.cv-header-wrapper h2{flex:1;text-align:center;}
.cv-container{
  overflow:auto;border:3px solid #eaeaea;border-radius:8px;margin-top:0px;
}
.cv-container iframe{
  width:100%;aspect-ratio:8.5 / 11;border:none;
}

/* Hide CV title in expanded detail */
.post-detail article > h3[data-no-title] {display:none;}
/* Image row */
.image-row{display:flex;flex-wrap:wrap;gap:10px;}

/* -------------  GALLERY CONTAINER ------------- */
.gallery {
    display:flex;                /* Flexbox = easy centering */
    flex-wrap:wrap;              /* Wrap to next line if needed */
    justify-content:center;
    align-items:center;
    gap:6vw;  /* Optional spacing between items */
    padding:0;
}

/* -------------  IMAGE STYLES ------------- */
.gallery figure {
    margin:0;                    /* Reset default figure margin */
}

.gallery img {
    display:block;                /* Remove inline‑space */
    max-width:100%;
    height:auto;
    border-radius:8px;            /* Optional styling */
    box-shadow:0 2px 8px rgba(0,0,0,.1);

}
.gallery-item{
  display:flex;
  flex-direction:column;
  align-items:center;
  width:36vw;
}
.gallery-item img{
  width:100%;
  height:100%;
  object-fit:cover;
  border:3px solid #ffffff;
  box-shadow:
      0 4px 8px rgba(0,0,0,.25),
      0 1px 2px rgba(0,0,0,.12);
  transition:transform .2s ease, box-shadow .2s ease;
}
.gallery-item img:hover{transform:scale(1.05);z-index:-0;}
.gallery-item .description{
  display:block;margin-top:.5rem;padding:.5rem .5rem;font-size:.9rem;color:#444;text-align:center;
  background:#ffffff;border:1px solid #e0e0e0;border-radius:4px;box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.gallery-item figure{position:relative;}

/* Modal for gallery preview */
.modal{
  position:fixed; top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,.8);
  display:flex;
  flex-direction:column;
  align-items:center; justify-content:top;
  visibility:hidden; opacity:0;
  transition:.3s ease;
  z-index:0;
}
.modal.show{visibility:visible; opacity:1;display: flex;}
.modal img{
  max-width:90vw; max-height:75vh;
  border-radius:4px;
  margin-bottom:8px;              /* space between image & caption */
}
.modal-caption{
  color:#fff; font-size:1rem; padding:0 12px;
  text-align:center;
}
/* ----------  Zoom wrapper ---------- */
.modal-zoom {
  max-width: 90vw;          /* keep inside viewport */
  max-height: 90vh;
  text-align: center;
  overflow: hidden;

  /* Initial state – tiny & invisible */
  transform: scale(.6);
  opacity: 0;

  /* Animation when .show is added */
  transition:
    transform .5s ease-out,
    opacity   .3s ease-in;
}

/* When the modal is shown, grow to full size and fade in */
#imageModal.modal.show .modal-zoom {
  transform: scale(1);
  opacity: 1;
}
/* ---------- COIN FLIP------------------------------------ */
#coin-demo {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  margin: 0 auto;           /* center horizontally on the page */
  }

/* ---------- Controls ------------------------------- */
#coin-demo #controls {
  position: relative;
  top: 20vh;
}
#coin-demo button,
#coin-demo select {
  padding:.75rem 1.25rem;
  font-size:1.125rem;
  margin-right:.5rem;
  border:none;
  background:#444;
  color:white;
  cursor:pointer;
  border-radius:6px;
}
#coin-demo button:hover {background:#555;}
#coin-demo .coin-btn.selected{background-color:#777;color:white;}

/* ---------- Coins container ------------------------ */
#coin-demo .coins-wrapper{
  display:flex;
  justify-content:center;
  align-items:flex-end; /* so coins start at bottom */
  position:relative;
  height:270px;          /*  space for fly animation */
  transform: translateX(50px);
}

/* ---------- Coin ----------------------------------- */
#coin-demo .coin-flip{
  width:145px;
  height:145px;
  transform-style:preserve-3d;
  position:absolute;
  top:calc(100% - 0px);   /* start slightly above the bottom of wrapper */
}

/* ---------- Heads / Tails -------------------------- */
#coin-demo .coin-heads,
#coin-demo .coin-tails{
  position:absolute;
  top:0;
  left:0;
  clip-path:circle(42%);
}
#coin-demo .coin-heads{animation:flip-head 1.5s ease-out forwards;}
#coin-demo .coin-tails{animation:flip-tail 1.5s ease-out forwards;}

/* ---------- Result after animation ----------------- */
#coin-demo .coin-flip.result-h .coin-heads {transform:rotateX(0deg); }
#coin-demo .coin-flip.result-h .coin-tails{display:none;}
#coin-demo .coin-flip.result-t .coin-tails{transform:rotateX(0deg);}
#coin-demo .coin-flip.result-t .coin-heads{display:none;}


/* ---------- Animations ----------------------------- */
@keyframes fly { from {top:100%;} to   {top:10%;} }
@keyframes flip-head{
  0%,100%{transform:rotateX(0deg);}
  50%    {transform:rotateX(180deg);}
}
@keyframes flip-tail{
  0%,100%{transform:rotateX(180deg);}
  50%    {transform:rotateX(0deg);}
}


@media (max-height:600px) {
#coin-demo .coins-wrapper{
  height:30px;}
}

</style>
</head>
<meta name="viewport"
      content="width=device-width, initial-scale=1">

<body>
<nav class="glass-nav">
 <a href="#" data-target="section1" aria-current="page"><span>Home</span></a>
    <a href="#" data-target="section2">Photos</a>
    <a href="#" data-target="section3">Coin Flip</a>

    <!-- Sliding panel (one element for all links) -->
    <div class="panel"></div>
</nav>

<h1></h1>

<main>
  <!-- Section 1 – Home -->
  <section id="section1">
    <h2></h2>
    <div class="blog-container">

      <div class="preview-list">

      <!--
         <!-- Contact card (static)
        <article class="post static"><h3>Contact</h3>
          <div class="contact-card">
            <p><strong>Email:</strong> </p>
            <p><strong>Phone:</strong> (123) 456‑7890</p>
            <p><strong>Address:</strong></p>
          </div>
        </article>  -->

        <!-- Featured image -->
        <article class="post"><h3>Featured Image</h3>
          <div class="preview">Click to view the featured picture.</div>
          <div class="full-body">
            <img src="assets/pic.png" alt="A descriptive caption of pic.png">
            <p>A descriptive caption for pic.png.</p>
            <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.</p>

<p>Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.</p>

<p>Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,</p>

          </div>
        </article>

        <!-- Recent project showcase -->
        <article class="post"><h3>Recent Project Showcase</h3>
          <p class="meta">20 Sep 2025</p>
          <div class="preview">A sneak peek of the latest work</div>
          <div class="full-body">
            <p>This project involved building a cutting‑edge web application that integrates real‑time data visualisation and AI‑powered analytics.</p>
            <div class="image-row">
              <img src="assets/pic.png" alt="Screenshot of the first feature in the recent project.">
              <img src="assets/pic.png" alt="Screenshot of the second feature in the recent project.">
            </div>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>

<p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus.</p>

<p>Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.</p>

<p>Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,</p>
          </div>
        </article>

        <!-- CV -->
        <article class="post"><h3 data-no-title="true">Curriculum Vitae</h3>
          <div class="preview">Click to view or download here.</div>
          <div class="full-body">
            <div class="cv-header-wrapper">
              <a href="assets/cv.pdf" target="_blank" class="download-btn">Download CV</a>
            </div>
            <div class="cv-container">
              <iframe src="assets/cv.pdf"></iframe>
            </div>
          </div>
        </article>
      </div>

      <!-- Detail area – shows the currently selected post -->
      <div class="post-detail"></div>
    </div>

  </section>
  <section id="section2">
    <h2></h2>

    <div class="gallery" id="gallery">

      <!-- Example image 1 -->
      <figure class="gallery-item">
        <img src="assets/gallery5.png" alt="Gallery image 1">
        <figcaption class="description">A brief description of Gallery image 1.</figcaption>
      </figure>

      <!-- Repeat for the remaining images… -->
      <figure class="gallery-item"><img src="assets/gallery6.png" alt="Gallery image 2"><figcaption class="description">A brief description of Gallery image 2.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery3.png" alt="Gallery image 3"><figcaption class="description">A brief description of Gallery image 3.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery4.png" alt="Gallery image 4"><figcaption class="description">A brief description of Gallery image 4.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery1.png" alt="Gallery image 5"><figcaption class="description">A brief description of Gallery image 5.</figcaption></figure>
      <figure class="gallery-item"><img src="assets/gallery2.png" alt="Gallery image 6"><figcaption class="description">A brief description of Gallery image 6.</figcaption></figure>
    </div>
  </section>


   </section>
  <section id="section3">
<div id="coin-demo">
  <div class="coins-wrapper" id="wrapper"></div>

  <div id="controls">
    <label>&nbsp;</label>
    <div id="numCoinsContainer">
      <button class="coin-btn selected" data-num="1">1</button>
      <button class="coin-btn" data-num="2">2</button>
      <button class="coin-btn" data-num="3">3</button>
      <button class="coin-btn" data-num="4">4</button>
    </div>
    <button id="flipBtn">Flip!</button>
  </div>


</div> <!-- /#coin-demo -->
     </section>

</main>

<!-- Modal for gallery preview -->
<div id="imageModal" class="modal">
  <img src="" alt="">
  <div class="modal-caption"></div>
</div>
<script>
/* ------------------------------------------------------------------ */
/* 1️⃣ Navigation & section activation --------------------------------*/

document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('[data-target]');
    const sections = document.querySelectorAll('section');
    const nav      = document.querySelector('.glass-nav');
    const panel    = nav.querySelector('.panel');

    let currentNavIndex = null;        // index of the link that is currently active
    let currentSectionId = null;       // id of the section that is currently shown

    /* ---------------------------------------------------------------- */

    function clearActive(sectionId) {
        document
            .querySelectorAll(`#${sectionId} .post.active`)
            .forEach(p => p.classList.remove('active'));
    }

    function movePanelTo(idx) {
        const linkRect = navLinks[idx].getBoundingClientRect();
        const navRect  = nav.getBoundingClientRect();

        const targetLeft =
            linkRect.left + (linkRect.width / 2)
                - navRect.left
                - (panel.clientWidth / 2);

        panel.style.transform = `translateX(${targetLeft}px)`;
    }


    // Smooth scroll – used only inside the Home section
    function scrollToWithOffset(el, offset = 0) {
        el.scrollIntoView({ behavior: 'auto', block: 'start' });
        setTimeout(() => window.scrollBy(0, offset), 0);
    }

    // Instant (no‑smooth) jump – used when moving between sections
    function scrollToInstantWithOffset(el, offset = 0) {
          el.scrollIntoView({ behavior: 'auto', block: 'start' });

    // Offset it after the layout has settled
    requestAnimationFrame(() => window.scrollBy(0, offset = -1000));
    }

    /* ---------------------------------------------------------------- */

    const THRESHOLD_TOP = nav.offsetHeight / 1; // tweak if you need more room

    function showSection(id, linkIdx = null) {
        // --------- hide the previous section --------------------------------
        sections.forEach(s => s.classList.remove('active'));

        const targetSec = document.getElementById(id);
        if (!targetSec) return;

        targetSec.classList.add('active');

        // remember which section is now active (used to decide on scrolling)
        currentSectionId = id;
        clearActive(id);
        expandFirstInSection(id);

        /* ------------------------------------------------- */
        /* 1️⃣ Only scroll when we’re *not* at the very top of the page   */
        /* ------------------------------------------------- */
        const isAtTop = window.scrollY < THRESHOLD_TOP;

        if (linkIdx !== null) {
            // **no smooth** – instant jump between sections
            // If you want a small offset to keep the section just below the nav,
            // pass `-nav.offsetHeight` as the second argument.
            scrollToInstantWithOffset(targetSec);
        }

        /* ------------------------------------------------- */
        /* 2️⃣ Update panel & active link (always run – we still want it) */
        /* ------------------------------------------------- */
        if (linkIdx !== null) {
            movePanelTo(linkIdx);
            currentNavIndex = linkIdx;
            navLinks.forEach((l, i) =>
                l.classList.toggle('active-link', i === currentNavIndex)
            );
        }
    }

    function expandFirstInSection(sectionId){
        const list = document.querySelector(`#${sectionId} .preview-list`);
        if (!list) return;
        list.querySelectorAll('.post.active').forEach(p=>p.classList.remove('active'));
        const firstPost = list.querySelector('.post:not(.static)');
        if(!firstPost) return;
        firstPost.classList.add('active');
        const detailArea = document.querySelector(`#${sectionId} .post-detail`);
        const title   = firstPost.querySelector('h3').outerHTML;
        const meta    = firstPost.querySelector('.meta')?.outerHTML || '';
        const body    = firstPost.querySelector('.full-body')?.innerHTML || '';
        detailArea.innerHTML = `<article>${title}${meta}<div class="full-body">${body}</div></article>`;
    }

    /* ----------------------------------------------------------------- */
    const initialIdx = 0; // index of navLinks[0]
    showSection(navLinks[initialIdx].dataset.target, initialIdx);

    navLinks.forEach((link, i) => {
        link.addEventListener('click', e => {
            e.preventDefault();
            showSection(link.dataset.target, i);
        });
    });

    /* ----------------------------------------------------------------- */
    /* 3️⃣ Preview‑list clicks – same “no‑scroll‑when‑at‑top” guard     */
    /* ----------------------------------------------------------------- */
    document.querySelectorAll('.preview-list').forEach(list => {
        list.addEventListener('click', e => {
            const post = e.target.closest('.post');
            if (!post || post.classList.contains('static')) return;

            list.querySelectorAll('.post.active')
                .forEach(p => p.classList.remove('active'));
            post.classList.add('active');

            const detailArea = list.nextElementSibling; // .post-detail
            const title   = post.querySelector('h3').outerHTML;
            const meta    = post.querySelector('.meta')?.outerHTML || '';
            const body    = post.querySelector('.full-body')?.innerHTML || '';
            detailArea.innerHTML =
                `<article>${title}${meta}<div class="full-body">${body}</div></article>`;

            /* Only scroll if we’re not already at the top of the page */
            const isAtTop = window.scrollY < THRESHOLD_TOP;
            if (!isAtTop) {
                // Smooth scroll *inside* the Home section
                scrollToWithOffset(detailArea, -600);
            }
        });
    });
});
/* --------------------------------------------------------------
   GLASS NAV PANEL – distance → duration (px per second)
-------------------------------------------------------------- */
document.addEventListener('DOMContentLoaded', () => {
    const nav   = document.querySelector('.glass-nav');
    const panel = nav.querySelector('.panel');
    const links = Array.from(nav.querySelectorAll('a'));
    const count = links.length;



    /* ----------------------------------------------------------
       State variables
    ---------------------------------------------------------- */
    let currentLeft = 0;          // left offset of the panel (px)
    let activeIdx   = -1;         // index of the link that is currently “active”

    /* ----------------------------------------------------------
       Helper: distance → duration (px per second)
    ---------------------------------------------------------- */
    const msPerPixel = 1000 / 550;   // ms for each pixel
    const minDur     = .85;          // seconds
    const maxDur     = 1.25;         // seconds

    const durationForDistance = dist => {
        const raw = Math.abs(dist) * msPerPixel / 1000;
        return Math.min(Math.max(raw, minDur), maxDur);
    };
    /* ----------------------------------------------------------
       Move the selector to the link at position `idx`
    ---------------------------------------------------------- */
    const setPanel = idx => {
        if (idx < 0 || idx >= count) return;

        const linkRect = links[idx].getBoundingClientRect();
        const navRect  = nav.getBoundingClientRect();
        const panelW   = panel.clientWidth;

        // Desired left offset so the panel is centered on the link text
        const targetLeft =
            linkRect.left + (linkRect.width / 2) - navRect.left - (panelW / 2);

        // Animate over a duration that depends on how far we must travel
        const dur = durationForDistance(targetLeft - currentLeft);
        panel.style.transitionDuration = `${dur}s`;

        panel.style.transform = `translateX(${targetLeft}px)`;
        currentLeft = targetLeft;
    };


       activeIdx = links.findIndex(a => a.hasAttribute('aria-current'));
    if (activeIdx !== -1) {
        // Defer until layout is ready
        requestAnimationFrame(() => setPanel(activeIdx));
    } else {
        panel.style.opacity = '0';
    }


function initNav() {
    // … all the constants / state variables …

    /* ---------- INITIAL POSITION ---------- */
    activeIdx = links.findIndex(a => a.hasAttribute('aria-current'));
    if (activeIdx !== -1) {
        // Let Safari finish layout first
        requestAnimationFrame(() => setPanel(activeIdx));
    } else {
        panel.style.opacity = '0';
    }
}

document.addEventListener('DOMContentLoaded', initNav);

    /* ----------------------------------------------------------
       Hover logic – update the selector and remember the index
    ---------------------------------------------------------- */
    links.forEach((link, i) => {
        link.addEventListener('mouseenter', () => {
            activeIdx = i;
            setPanel(i);
            panel.style.opacity = '1';
        });
    });

    /* ----------------------------------------------------------
       Return to the active section when leaving the nav bar
    ---------------------------------------------------------- */
    nav.addEventListener('mouseleave', () => {
        const activeLink = nav.querySelector('a.active-link');
        if (!activeLink) return;

        const idx = links.indexOf(activeLink);
        if (idx === -1) return;

        activeIdx = idx;
        setPanel(idx);
        panel.style.opacity = '1';
    });

    /* ----------------------------------------------------------
       Flick / swipe detection
    ---------------------------------------------------------- */
    let startX   = null;          // X coordinate where the gesture started
    let startT   = null;          // Timestamp when the gesture started

    const minDistance = 30;       // px – minimal distance for a flick
    const minSpeed    = 0.3;      // px/ms (≈300 px/s)

    const handlePointerDown = e => {
        if (e.pointerType === 'mouse' && e.button !== 0) return; // ignore right‑clicks
        startX = e.clientX;
        startT = performance.now();
    };

    const handlePointerUp = e => {
        if (startX === null) return;

        const endX   = e.clientX;
        const deltaX = endX - startX;
        const deltaT = performance.now() - startT;

        // Only consider horizontal flicks that are fast enough
        if (
            Math.abs(deltaX) > minDistance &&
            Math.abs(deltaX) / deltaT >= minSpeed
        ) {
            const dir   = deltaX > 0 ? +1 : -1;     // right or left
            let newIdx  = activeIdx + dir;

            // Clamp to the bounds of the link list
            if (newIdx < 0)    newIdx = 0;
            if (newIdx >= count) newIdx = count - 1;

            if (newIdx !== activeIdx) {
                activeIdx = newIdx;
                setPanel(newIdx);
                panel.style.opacity = '1';
            }
        }

        // Reset
        startX = null;
        startT = null;
    };

    nav.addEventListener('pointerdown', handlePointerDown, {passive: true});
    nav.addEventListener('pointerup',   handlePointerUp);

    /* ----------------------------------------------------------
       Touch‑only fallback – blocks vertical scroll during horizontal swipe
    ---------------------------------------------------------- */
    if ('ontouchstart' in window) {
        let startY = null;           // Y coordinate at touchstart (for direction test)
        let isHorizontalTouch = null; // unknown until we see the first move

        nav.addEventListener('touchstart', e => {
            if (e.touches.length !== 1) return;

            const t = e.touches[0];
            startX   = t.clientX;
            startY   = t.clientY;
            startT   = performance.now();
            isHorizontalTouch = null; // reset
        }, {passive: false});          // must be non‑passive to call preventDefault()

        nav.addEventListener('touchmove', e => {
            if (!e.touches || e.touches.length !== 1) return;

            const t   = e.touches[0];
            const dx  = t.clientX - startX;
            const dy  = t.clientY - startY;

            // Decide direction only once
            if (isHorizontalTouch === null) {
                isHorizontalTouch = Math.abs(dx) > Math.abs(dy);
            }

            // If a horizontal swipe is detected, block vertical scrolling
            if (isHorizontalTouch) {
                e.preventDefault();
            }
        }, {passive: false});

        nav.addEventListener('touchend', e => {
            if (!e.changedTouches || e.changedTouches.length !== 1) return;

            const t   = e.changedTouches[0];
            const endX = t.clientX;
            const deltaX = endX - startX;
            const deltaT = performance.now() - startT;

            // Re‑use the same flick logic as for pointer events
            if (
                Math.abs(deltaX) > minDistance &&
                Math.abs(deltaX) / deltaT >= minSpeed
            ) {
                const dir   = deltaX > 0 ? +1 : -1;
                let newIdx  = activeIdx + dir;

                if (newIdx < 0)    newIdx = 0;
                if (newIdx >= count) newIdx = count - 1;

                if (newIdx !== activeIdx) {
                    activeIdx = newIdx;
                    setPanel(newIdx);
                    panel.style.opacity = '1';
                }
            }

            // Reset
            startX   = null;
            startY   = null;
            isHorizontalTouch = null;
        });
    }
});


// --------------------------COIN FLIP
(() => {
  /* ----- Utility: create a coin element ---------------- */
  function createCoin() {
    const c = document.createElement('div');
    c.className='coin-flip';

    const heads = document.createElement('div');
    heads.className='coin-heads';
    const himg = document.createElement('img');
    // If you don't have assets/pic3.png, replace with a data‑URI or another URL
    himg.src='assets/pic5.png';
    heads.appendChild(himg);

    const tails = document.createElement('div');
    tails.className='coin-tails';
    const timg = document.createElement('img');
    // If you don't have assets/pic2.png, replace with a data‑URI or another URL
    timg.src='assets/pic4.png';
    tails.appendChild(timg);

    c.appendChild(heads);
    c.appendChild(tails);
    return c;
  }

  /* ----- Animation helpers ---------------------------- */
  function startAnimation(coin) {
    // Force restart of animation
    coin.style.animation = 'none';
    void coin.offsetWidth;                     // trigger reflow
    // Start the fly animation with an ease‑out timing for faster start
    coin.style.animation = 'fly 1.5s ease-out forwards';

    // After fly + flip finishes, set the result
    setTimeout(() => setResult(coin), 1500);
  }

  function setResult(coin) {
    const heads = Math.random() < 0.5;          // true=heads, false=tails
    if (heads) coin.classList.add('result-h');
    else       coin.classList.add('result-t');
    // stop the fly animation so coin stays at final position
    coin.style.animation = 'none';
  }

  function flipCoins(n) {
    const wrapper = document.getElementById('wrapper');
    wrapper.innerHTML = '';                     // clear previous coins

    let delay = 0;                              // ms before we start a coin
    const centerDistance = 80;                 // spacing between centers
    const staggerMs = 260;                      // <‑– change this to tweak the gap

    for (let i = 0; i < n; i++) {
      const coin = createCoin();

      /* ---- Position the coin so its centre is over the wrapper’s centre */
      const leftOffset = (i - (n - 1) / 2) * centerDistance;
      coin.style.left = `calc(50% + ${leftOffset}px - 50px)`;
      coin.style.transform = 'translateX(-50%)';

      wrapper.appendChild(coin);

      /* ---- Start the fly animation after a staggered delay */
      setTimeout(() => startAnimation(coin), delay);
      delay += staggerMs;                       // next coin starts `staggerMs` later
    }
  }

  /* ----- Handle coin count button selection ---------------- */
  let selectedNum = 1;
  const coinBtns = document.querySelectorAll('#numCoinsContainer .coin-btn');
  coinBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      selectedNum = parseInt(btn.dataset.num, 10);
      coinBtns.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
    });
  });

  /* ----- Event listeners -------------------------------- */
  document.getElementById('flipBtn').addEventListener('click', () => flipCoins(selectedNum));

})();
// Gallery modal --------------------------------------------
const modal = document.getElementById('imageModal');
const modalImg = modal.querySelector('img');
const modalCaption = modal.querySelector('.modal-caption');

document.getElementById('gallery').addEventListener('click', e => {
  if (e.target.tagName.toLowerCase() !== 'img') return;

  const img = e.target;
  modalImg.src   = img.src;
  modalImg.alt   = img.alt;

  // Grab the caption text from the closest .gallery-item
  const captionEl = img.closest('.gallery-item').querySelector('.description');
  const captionText = captionEl ? captionEl.innerText : '';
  if (captionText) {
    modalCaption.textContent = captionText;
    modalCaption.style.display = 'block';
  } else {
    modalCaption.style.display = 'none';
  }

  /* ---- open the modal & trigger the animation ---- */
  modal.classList.add('show');

  // Force a re‑flow so that if you click the same image again,
  // the animation will restart.
  void modal.offsetWidth;            // <-- this line is optional but safe
});

modal.addEventListener('click', () => {
  modal.classList.remove('show');
  modalImg.src = '';
  modalImg.alt = '';
  modalCaption.textContent = '';
  modalCaption.style.display = 'none';
});


</script>
</body>
</html>
